# rns-lvl-editor

## Краткое описание

Редактор уровней, предназначенный для создания разметки уровней для игры **Rhytm and Shake**. Он позволяет загружать аудиофайлы, проигрывать их и создавать события в определенные моменты времени, которые затем сохраняются в формате JSON для использования в игре.
Созданный JSON файл имеет следующую структуру:

```json
{
  "authorName": "Имя автора",
  "songName": "Название трека",
  "track1": [
    {"time": "время в секундах", "dir": "направление"},
    ...
  ],
  "track2": [
    {"time": "время в секундах", "dir": "направление"},
    ...
  ],
  "trackAcc": [
    {"time": "время в секундах", "dir": "направление"},
    ...
  ]
}
```

## Установка и запуск

1. Загрузите репозиторий проекта
2. Установите Python 3.10.5 на [официальном сайте](https://www.python.org/downloads/release/python-3105/)
3. Откройте папку проекта через терминал
4. Установите зависимости, требуемые для работы программы:
   ```bash
   $ pip install -r requirements.txt
   ```
5. Запустите main.py

## Интерфейс пользователя

#### Главное меню

* **File**
  * **Select**: Открыть диалог для выбора аудиофайла (WAV).
  * **Save**: Сохранить текущую разметку уровня в файл JSON.
  * **Exit**: Сохранить разметку и выйти из приложения.

#### Основные кнопки

* **Play**: Начать воспроизведение аудиофайла.
* **Pause**: Приостановить воспроизведение аудиофайла.
* **Reset**: Сбросить воспроизведение аудиофайла к началу.

#### Слайдеры

* **Основной слайдер**: Перемещение по аудиофайлу.
* **Слайдер громкости**: Изменение громкости воспроизведения.

#### Кнопки разметки

**Замечание.** После нажатия одной из кнопок разметки воспроизведение аудиофайла приостанавливается

* **R1**: Создание или изменение события на первой дорожке.
* **R2**: Создание или изменение события на второй дорожке.
* **R3**: Создание или изменение события на дорожке акселерометра.

#### Информационные поля

* **Current Time** : Текущее время воспроизведения.
* **Max Time** : Общее время аудиофайла.

## Разработка и расширение

Если вам нужно изменить программу, то в репозитории доступен исходный код. Коды `res_rc.py` и `ui_main.py` генерируются из соответствующих .ui и .qrc файлов из папки ui, в которой также находятся шрифты и иконки редактора уровней. Методы внутри `main.py` задокументированы, ниже представлено их краткое описание:

#### Основные методы

* `click_act_1, click_act_2, click_act_3`: Методы для создания и изменения событий на дорожках.
* `play_sound, pause_sound, reset_sound`: Методы для управления воспроизведением.
* `select`: Метод для выбора аудиофайла.
* `save`: Метод для сохранения разметки.
* `close_app`: Метод для закрытия приложения.

#### Вспомогательные методы

* `format_time`: Форматирование времени в миллисекундах в строку "MM.mmm".
* `get_seconds`: Преобразование времени в миллисекундах в секунды с дробной частью.
* `update_position`: Обновление текущего времени воспроизведения.
* `update_volume`: Обновление уровня громкости.
* `seek`: Перемещение по аудиофайлу с помощью слайдера.
